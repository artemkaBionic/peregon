<horizontal-ui-sheet class="apc-sheet-full guide xbox-one">
  <header horizontal-ui-sheet-header title="Refresh Microsoft Xbox One">
    <span class="apc-sheet-subtitle">{{vm.step.title}}</span>
  </header>
  <div horizontal-ui-sheet-content>
    <div class="row">
      <ul id="progress-tracker" data-steps="6">
        <li ng-class="{'active': vm.step.number == 1, 'done': vm.step.number > 1}"><span>Start</span></li>
        <li ng-class="{'active': vm.step.number >= 2 && vm.step.number <= 4, 'done': vm.step.number > 4}"><span>Prepare<br>Refresh</span></li>
        <li ng-class="{'active': vm.step.number >= 5 && vm.step.number <= 6, 'done': vm.step.number > 6}"><span>Refresh<br>Xbox</span></li>
        <li ng-class="{'active': vm.step.number >= 7 && vm.step.number <= 9, 'done': vm.step.number > 9}"><span>Prepare<br>Update</span></li>
        <li ng-class="{'active': vm.step.number == 10, 'done': vm.step.number > 10}"><span>Update<br>Xbox</span></li>
        <li ng-class="{'active': vm.step.number == 11}"><span>Finish</span><i></i></li>
      </ul>
    </div>

    <div ng-switch="vm.step.name" class="row wizard">

      <div class="anim-wizard-step" id="first" ng-switch-when="details">
        <form name="form" novalidate ng-submit="vm.prepareRefreshUsbStart()">
          <div class="row wizard-contents">
            <h2>What is the item number?</h2>
            <div class="text-input">
              <span class="fa fa-barcode"></span>
              <input autofocus name="itemnumber" class="form-control item-number-input" placeholder="Enter Item Number" type="text" ng-model="vm.itemNumber" required ng-minlength=10 ng-maxlength=10 ng-pattern="/^\d{10}$/" >
            </div>
            <div class="error-container" ng-show="form.itemnumber.$invalid">
              <span class="error" ng-show="form.itemnumber.$error.required || form.itemnumber.$error.minlength">10 digit item number is required.</span>
              <span class="error" ng-show="form.itemnumber.$error.maxlength">Item number must be 10 digits.</span>
            </div>
          </div>
          <div class="row">
            <button type="submit" class="btn btn-primary btn-rounded center" ng-disabled="form.$invalid">
              Next &nbsp; <i class="fa fa-caret-right"></i>
            </button>
          </div>
          <div class="row wizard-graphics wizard-contents">
            <img src="/assets/images/XboxItemNumber.png" class="wizard-image center">
          </div>
        </form>
      </div>

      <div class="anim-wizard-step" ng-switch-when="prepareRefreshUsbInsert">
        <div class="row wizard-contents">
          <h2>Please insert a 4GB or larger USB drive into the Refresh Station.</h2>
        </div>
        <div class="row wizard-graphics wizard-contents">
          <img src="/assets/images/InsertUsbDrive.png" class="wizard-image center">
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="prepareRefreshUsbInProgress">
        <div class="row wizard-graphics">
          <div class="la-ball-clip-rotate-multiple la-2x spinner">
            <div></div>
            <div></div>
          </div>
        </div>
        <div class="row wizard-contents">
          <h2>Preparing USB drive for Xbox refresh.</h2>
          <h3>This should take a few seconds, please wait...</h3>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="prepareRefreshUsbComplete">
        <div class="row wizard-graphics">
          <span class="fa fa-check-circle anim-success-icon"></span>
        </div>
        <div class="row wizard-contents">
          <h2>The USB drive is ready.</h2>
          <h3>Remove it from the Refresh Station to continue.</h3>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="refreshXbox">
        <div class="row border-step">
          <div class="col-sm-8">
            <video controls autoplay>
              <source src="/assets/videos/XboxOneRefresh.webm" type='video/webm;codecs="vp9, vorbis"'>
              <source src="/assets/videos/XboxOneRefresh.mp4" type="video/mp4">
              <track label="English" kind="subtitles" srclang="en" src="/assets/videos/XboxOneRefresh-en.vtt" default>
              Your browser does not support the video tag.
            </video>
          </div>
          <div class="col-sm-4 ref-list">
            <ol>
              <li>If the Xbox is plugged in, unplug it and wait a few seconds.</li>
              <li>Plug in the USB drive and power cord.</li>
              <li>Press and hold the <b>BIND</b> and <b>EJECT</b> buttons while turning it on.</li>
              <li>Listen for two "power-up" tones a couple of seconds apart.</li>
              <li>Release the <b>BIND</b> and <b>EJECT</b> buttons.</li>
              <li>Wait a few seconds for the Xbox button light to turn off, then unplug the Xbox and remove the USB drive.</li>
            </ol>
          </div>
        </div>
        <div class="row wizard-contents h3-todo">
          <h3>Insert the USB drive into the Refresh Station to continue...</h3>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="verifyRefresh">
        <div class="row wizard-graphics">
          <div class="la-ball-clip-rotate-multiple la-2x spinner">
            <div></div>
            <div></div>
          </div>
        </div>
        <div class="row wizard-contents">
          <h2>Verifying the refresh. Please wait...</h2>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="prepareUpdateUsbInsert">
        <div class="row wizard-contents">
          <h2>Please insert a 4GB or larger USB drive into the Refresh Station.</h2>
        </div>
        <div class="row wizard-graphics">
          <img src="/assets/images/InsertUsbDrive.png" class="wizard-image center">
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="prepareUpdateUsbInProgress">
        <div class="row wizard-graphics">
          <div class="la-ball-clip-rotate-multiple la-2x spinner">
            <div></div>
            <div></div>
          </div>
        </div>
        <div class="row wizard-contents">
          <h2>Preparing USB drive for Xbox update.</h2>
          <h3>This may take a couple minutes, please wait...</h3>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="prepareUpdateUsbComplete">
        <div class="row wizard-graphics">
          <span class="fa fa-check-circle anim-success-icon"></span>
        </div>
        <div class="row wizard-contents">
          <h2>The USB drive is ready.</h2>
          <h3>Remove it from the Refresh Station to continue.</h3>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="updateXbox">
        <div class="row border-step">
          <div class="col-sm-8">
            <video controls autoplay>
              <source src="/assets/videos/XboxOneRefresh.webm" type='video/webm;codecs="vp9, vorbis"'>
              <source src="/assets/videos/XboxOneRefresh.mp4" type="video/mp4">
              <track label="English" kind="subtitles" srclang="en" src="/assets/videos/XboxOneRefresh-en.vtt" default>
              Your browser does not support the video tag.
            </video>
          </div>
          <div class="col-sm-4 ref-list">
            <ol>
              <li>If the Xbox is plugged in, unplug it and wait a few seconds.</li>
              <li>Plug in the USB drive and power cord.</li>
              <li>Press and hold the <b>BIND</b> and <b>EJECT</b> buttons while turning it on.</li>
              <li>Listen for two "power-up" tones a couple of seconds apart.</li>
              <li>Release the <b>BIND</b> and <b>EJECT</b> buttons.</li>
              <li>Wait a couple minutes for the Xbox button light to turn off, then unplug the Xbox and remove the USB drive.</li>
            </ol>
            </div>
        </div>
        <div class="row wizard-contents h3-todo">
          <h3>Insert the USB drive into the Refresh Station to continue...</h3>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="complete">
        <div class="row wizard-graphics">
          <span class="fa fa-check-circle anim-success-icon"></span>
        </div>
        <div class="row wizard-contents">
          <h2>You have successfully refreshed the Xbox.</h2>
        </div>
        <div class="row">
          <button class="btn btn-primary btn-rounded center" ui-sref="^" href="#/user/home">
            Finish &nbsp; <i class="fa fa-caret-right"></i>
          </button>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="failed">
        <div class="row wizard-graphics">
          <span class="fa fa-exclamation-triangle anim-warning-icon"></span>
        </div>
        <div class="row wizard-contents">
          <h2>The Xbox refresh failed.</h2>
          <h3>{{vm.errorMessage}}</h3>
          <h3>Please try again. If error persists, contact support.</h3>
        </div>
        <div class="row">
          <button class="btn btn-primary btn-rounded center" ng-click="vm.retry()">
            <i class="fa fa-repeat"></i> &nbsp; Retry
          </button>
        </div>
      </div>

    </div>
  </div>
</horizontal-ui-sheet>
