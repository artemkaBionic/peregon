<horizontal-ui-sheet class="apc-sheet-full guide xbox-one">
  <header class="guide-header">
    <div class="row header-row">
      <div class="col-sm-7 header-col">
        <div class="header-middle-col">
          <div class="home-link" ng-click="vm.refreshEnd()">
            <div class="home-button">
              <i class="fa fa-home home-button-icon"></i>
              <span class="home-button-text">Home</span>
            </div>
            <img class="guide-logo" src="/assets/images/Logo.png">
          </div>
          <div class="home-header">Xbox One Refresh</div>
        </div>
      </div>
      <div class="col-sm-5 header-col">
        <div class="header-middle-col-right">
          <img class="header-item-icon" src="/assets/images/xbox-logo.png">
          <div class="home-header-right">{{vm.item.Description}}</div>
        </div>
      </div>
    </div>
  </header>
  <div horizontal-ui-sheet-content>
    <div class="row">
      <ul id="progress-tracker" data-steps="3">
        <li ng-class="{'active': vm.step.number >= 1 && vm.step.number <= 5, 'done': vm.step.number > 4}">
          <span>Prepare<br>Refresh</span></li>
        <li ng-class="{'active': vm.step.number >= 6 && vm.step.number <= 7, 'done': vm.step.number > 6}">
          <span>Refresh<br>Xbox</span></li>
        <li ng-class="{'active': vm.step.number == 8}"><span>Finish</span><i></i></li>
      </ul>
    </div>

    <div ng-switch="vm.step.name" class="row wizard">

      <div class="anim-wizard-step" ng-switch-when="prepareRefreshUsbInsert">
        <div class="row wizard-contents">
          <h2>Please insert a 32GB or larger USB drive into the Refresh Station.</h2>
        </div>
        <div class="row wizard-graphics">
          <img src="/assets/images/InsertUsbDrive.png" class="wizard-image center">
        </div>
      </div>

      <div class="anim-wizard-step text-center" ng-switch-when="newBootDevice">
        <div class="boot-instruction-row">
          <div class="usb-icon-lg">
            <i class="fa fa-usb" aria-hidden="true"></i>
          </div>
        </div>

        <h2>{{vm.usbData.usbDrivesTitle}}</h2>
        <div class="boot-instruction-row">
          <span style="color:grey">{{vm.usbData.usbDrivesText}}<br>
            <strong>Warning!</strong> This will wipe all information you have on {{vm.usbData.usbDrive}}.
          </span>
        </div>
        <div class="boot-instruction-row">
          <button class="btn btn-success btn-rounded" ng-click="vm.createBootDrives()">{{vm.usbData.usbButtonText}}</button>
          <!--<button class="btn btn-danger btn-rounded" ng-click="vm.cancelBootDrive()">Cancel</button>-->
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="prepareRefreshUsbInProgress">
        <div class="row wizard-contents text-center">
          <h2>Preparing USB drive for X-Box refresh</h2>
          <h3>This may take up to 15 minutes...</h3>
        </div>
        <div class="row wizard-contents text-center">
          <div class="center circle-bar">
            <orbicular progression="vm.percentageComplete" total="100">{{vm.data.counter}}</orbicular>
          </div>
          <div>
            <p>{{vm.percentageComplete}}% complete</p>
          </div>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="prepareRefreshUsbComplete">
        <div class="row wizard-graphics">
          <i class="fa fa-check-circle success-icon"></i>
        </div>
        <div class="row wizard-contents">
          <h2>The USB drive is ready.</h2>
          <h3>Remove it from the Refresh Station to continue.</h3>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="refreshXbox">
        <div class="row border-step">
          <div class="col-sm-8 col-xs-12 text-center">
            <video controls>
              <source src="/assets/videos/XboxOneRefresh.webm" type='video/webm;codecs="vp9, vorbis"'>
              <source src="/assets/videos/XboxOneRefresh.mp4" type="video/mp4">
              <track label="English" kind="subtitles" srclang="en" src="/assets/videos/XboxOneRefresh-en.vtt" default>
              Your browser does not support the video tag.
            </video>
          </div>
          <div class="col-sm-4 col-xs-12 ref-list">
            <ol>
              <li>If the Xbox is plugged in, unplug it and wait a few seconds.</li>
              <li>Plug in the USB drive and power cord.</li>
              <li>Press and hold the <b>BIND</b> and <b>EJECT</b> buttons while turning it on.</li>
              <li>Listen for two "power-up" tones a couple of seconds apart.</li>
              <li>Release the <b>BIND</b> and <b>EJECT</b> buttons.</li>
              <li>Wait a few seconds for the Xbox button light to turn off, then unplug the Xbox and remove the USB
                drive.
              </li>
            </ol>
          </div>
        </div>
        <div class="row wizard-contents h3-todo">
          <h3>Insert the USB drive into the Refresh Station to continue...</h3>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="verifyRefresh">
        <div class="row wizard-graphics">
          <div class="la-ball-clip-rotate-multiple la-2x spinner">
            <div></div>
            <div></div>
          </div>
        </div>
        <div class="row wizard-contents">
          <h2>Verifying the refresh. Please wait...</h2>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="complete">
        <div class="step-header text-align-center">
          <i class="fa fa-check-circle success-icon"></i>
          <h2>Success</h2>
          <h3>You have successfully refreshed the Xbox</h3>
        </div>
        <div class="row finish-success-button">
          <button class="btn btn-primary btn-rounded center" ui-sref="^" href="#/user/home">
            Finish <i class="fa fa-caret-right"></i>
          </button>
        </div>
      </div>

      <div class="anim-wizard-step" ng-switch-when="failed">
        <div class="step-header text-align-center">
          <i class="fa fa-exclamation warning-icon"></i>
          <h2>The Xbox refresh failed</h2>
          <h3>{{vm.errorMessage}}</h3>
          <h3>Please try again.<br/> If error persists, contact support.</h3>
        </div>
        <div class="row nav-btn">
          <button class="btn btn-primary btn-rounded center" ng-click="vm.retry()">
            <i class="fa fa-repeat"></i> Retry
          </button>
        </div>
      </div>

    </div>
  </div>
</horizontal-ui-sheet>
